{%- assign 3s = site.pages | sort: 'path' | where_exp: 'i', 'i.dir contains include.current' -%}
{%- if 3s.size > 3 -%}
<ul class="list-unstyled border-left border-primary mt-1 ml-1 pl-2">
  {%- for 3 in 3s -%}
    {%- assign slug = 3.dir | split: '/' | last -%}
    {%- assign current = 3.url | remove: slug | remove: '//' | append: '/' -%}
    {%- assign 3_size = 3.dir | split: '/' | size -%}
    {%- if 3.url contains '/index.html' and 3.navhide != 1 and 3.title != '' and 3_size < 6 -%}
      <li class="mb-2">
        {%- if 3.url == page.url -%}
          <span>{%- if 3.navtitle -%}{{ 3.navtitle }}{%- else -%}{{ 3.title }}{%- endif -%}</span>
        {%- else -%}
          <a href="{{ 3.url | remove: 'index.html' }}">{{ 3.navtitle }}</a>
        {%- endif -%}
      </li>
      {% comment %}{%- include map/3.html current=3.url -%}{% endcomment %}
    {%- elsif include.current == current and 3.navhide != 1 and 3.title != '' and 3_size < 6 -%}
      <li class="mb-2">
        {%- if 3.url == page.url -%}
          <span>{{ 3.navtitle }}</span>
        {%- else -%}
          <a href="{{ 3.url }}">{{ 3.navtitle }}</a>
        {%- endif -%}
      </li>
      {% comment %}{%- include map/3.html current=3.url -%}{% endcomment %}
    {%- endif -%}
  {%- endfor -%}
</ul>
{%- endif -%}
